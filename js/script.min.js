var postLink=document.querySelector(".post-link"),popUp=document.querySelector(".pop-up"),popUpClose=popUp.querySelector(".button-close"),popUpName=popUp.querySelector(".pop-up__input_name"),popUpEmail=popUp.querySelector(".pop-up__input_email"),popUpLetter=popUp.querySelector(".pop-up__input_letter"),popUpForm=popUp.querySelector(".pop-up__form"),isStorageSupport=!0,storage="";try{storage=localStorage.getItem("login")}catch(p){isStorageSupport=!1}function init(){var p=new ymaps.Map("map",{center:[59.938635,30.323118],zoom:17,controls:["zoomControl"],behaviors:["drag"]}),e=new ymaps.Placemark([59.938635,30.323118],{},{iconLayout:"default#image",iconImageHref:"../img/map-marker.png",iconImageSize:[231,190],iconImageOffset:[-50,-210]});p.geoObjects.add(e)}postLink.addEventListener("click",function(p){p.preventDefault(),popUp.classList.add("pop-up_show"),popUpName.focus(),storage&&(popUpName.value=storage,popUpEmail.value=storage)}),popUpClose.addEventListener("click",function(p){p.preventDefault(),popUp.classList.remove("pop-up_show"),popUp.classList.remove("pop-up_error")}),popUpForm.addEventListener("submit",function(p){popUpName.value&&popUpEmail.value&&popUpLetter.value?isStorageSupport&&(localStorage.setItem("login",popUpName.value),localStorage.setItem("email",popUpEmail.value),localStorage.setItem("letter",popUpLetter)):(p.preventDefault(),popUp.classList.add("pop-up_error"))}),window.addEventListener("keydown",function(p){27===p.keyCode&&popUp.classList.contains("pop-up_show")&&(p.preventDefault(),popUp.classList.remove("pop-up_show"),popUp.classList.remove("pop-up_error"))}),ymaps.ready(init);